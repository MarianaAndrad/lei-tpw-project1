{% extends "layout.html" %}
{% block content %}

<div class="container mx-auto flex-row">
    <samll>Da plataforma</samll> </br>
    {% for title,type in list_types %}
            <a class="btn btn-outline btn-info" href="/graphics/{{type}}"> {{ title }}</a>
    {% endfor %}
    </br>

    {% if profile %}
    <h>Do utilizador</h> </br>
        {% for title,type in list_types %}
            <a class="btn btn-outline btn-info" href="/graphicsuser/{{type}}"> {{ title }}</a>
        {% endfor %}
    {% endif %}
    </br>

    <div style="width: 50%;">
        <canvas id="pie-chart-like"></canvas>
    </div>

    <div style="width: 50%;">
        <canvas id="pie-chart-comment"></canvas>
    </div>

    <div style="width: 50%;">
        <canvas id="pie-chart-post"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
    <script>
        var configs = [
          {
            type: 'pie',
            id: 'pie-chart-like',
            data: {{ datalike|safe }},
            labels: {{ labelslike|safe }},
            title: '{{titlelike}}'
          },
          {
            type: 'pie',
            id: 'pie-chart-comment',
            data: {{ datacomment|safe }},
            labels: {{ labelscomment|safe }},
            title: '{{titlecomment}}'
          },
          {
            type: 'pie',
            id: 'pie-chart-post',
            data: {{ datapost|safe }},
            labels: {{ labelspost|safe }},
            title: '{{titlepost}}'
          }
        ];
      
        window.onload = function() {
          configs.forEach(config => {
            var ctx = document.getElementById(config.id).getContext('2d');
            new Chart(ctx, {
              type: config.type,
              data: {
                datasets: [{
                  data: config.data,
                  backgroundColor: ['blue', 'red', 'green', 'yellow']
                }],
                labels: config.labels
              },
              options: {
                responsive: true,
                title: {
                  display: true,
                  text: config.title
                }
              }
            });
          });
        };
      </script>

</div>

{% endblock %}